<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Confirm Order</title>
  <link rel="stylesheet" href="buy.css">
  <link rel="stylesheet" href="allinone.css">
  
</head>
<body>
  <div class="offers">üî• 50% OFF on first order | Free Delivery above ‚Çπ299 üî•</div>

  <header>
    <nav>
      <ul>
        <li><a href="food.html">Home</a></li>
        <li><a href="cart.html">Cart</a></li>
        <li><a href="orders.html">Orders</a></li>
        <li><a href="contact.html">Contact Us</a></li>
        <li><a href="login.html">Login</a></li>
      </ul>
    </nav>
  </header>

  <div class="container">
    <h2>Confirm Your Order</h2>

    <!-- Product Preview (will be filled dynamically) -->
    <div class="product-preview" style="text-align:center; margin-bottom:20px;">
      <img src="" alt="Product image" style="max-width:300px; border-radius:8px;">
      <h3></h3>
      <p></p>
    </div>

    <!-- Order Summary Table -->
    <div id="order-summary">
      <table class="summary-table"></table>
    </div>

    <!-- Confirmation Buttons -->
    <div id="confirmation">
      <div style="margin-bottom: 16px;">Are you sure you want to place this order?</div>
      <button class="btn" id="add-to-cart">Add to Cart</button>
      <button class="btn" onclick="window.location.href='food.html'">No, Go Back</button>
    </div>

    <div id="cart-message" class="message" style="display:none;">
      üéâ Items added to cart successfully!
    </div>
  </div>

  <footer class="footer">
    <div class="footer-container">
      <div class="footer-left">
        <h3>Tastefully Yours</h3>
        <p>Deliciously crafted meals delivered to your door.</p>
        <p>&copy; 2025 Tastefully Yours. All rights reserved.</p>
      </div>
      <div class="footer-right">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="food.html">Home</a></li>
          <li><a href="menu.html">Menu</a></li>
          <li><a href="orders.html">Orders</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
  </footer>

  <!-- Load data.js so we can access foodItems -->
  <script src="foodProductData.js"></script>
  <script>
    // Get product ID from URL query
    const urlParams = new URLSearchParams(window.location.search);
    const productId = parseInt(urlParams.get("id"));

    // Find product from foodItems array
    const product = foodItems.find(item => item.id === productId);

    if (product) {
      // Fill product preview
      document.querySelector(".product-preview img").src = product.img;
      document.querySelector(".product-preview img").alt = product.name;
      document.querySelector(".product-preview h3").textContent = product.name;
      document.querySelector(".product-preview p").textContent = `Price: ‚Çπ${product.price}`;

      // Fill order summary table
      const table = document.querySelector(".summary-table");
      table.innerHTML = `
        <tr><th>Item</th><th>Qty</th><th>Price</th></tr>
        <tr><td>${product.name}</td><td>1</td><td>‚Çπ${product.price}</td></tr>
        <tr style="font-weight:bold;"><td>Total</td><td></td><td>‚Çπ${product.price}</td></tr>
      `;

      // Save order on confirm
      document.getElementById("add-to-cart").addEventListener("click", function() {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.push({
          id:product.id,
          date: new Date().toLocaleDateString(),
          name: product.name,
          price: product.price,
          image:product.img
        });
        localStorage.setItem("cart", JSON.stringify(cart));

        // Show confirmation message
        document.getElementById("cart-message").style.display = "block";
        document.getElementById("confirmation").style.display = "none";

        // Redirect after 2 sec
        setTimeout(() => {
          window.location.href = "cart.html";
        }, 2000);
      });
    } else {
      document.querySelector(".container").innerHTML = "<h2>‚ö†Ô∏è Product not found.</h2>";
    }
  </script>
</body>
</html>
